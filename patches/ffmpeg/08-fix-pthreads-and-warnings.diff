diff --git a/fftools/ffmpeg.h b/fftools/ffmpeg.h
index 1ba826e..3ce7a2b 100644
--- a/fftools/ffmpeg.h
+++ b/fftools/ffmpeg.h
@@ -24,5 +24,13 @@
 #include "config.h"
 
 #include <stdint.h>
+#if !HAVE_THREADS
+typedef int pthread_mutex_t;
+#define pthread_mutex_init(a, b) 0
+#define pthread_mutex_lock(a) 0
+#define pthread_mutex_unlock(a) 0
+#define pthread_mutex_destroy(a) 0
+#endif
+
 #include <stdio.h>
 #include <signal.h>
diff --git a/fftools/ffmpeg_opt.c b/fftools/ffmpeg_opt.c
index 2341234..5678901 100644
--- a/fftools/ffmpeg_opt.c
+++ b/fftools/ffmpeg_opt.c
@@ -345,7 +345,7 @@ static void correct_input_start_times(void)
             if (copy_ts && start_at_zero)
                 ifile->ts_offset = -new_start_time;
             else if (!copy_ts) {
-                abs_start_seek = is->start_time + (ifile->start_time != AV_NOPTS_VALUE) ? ifile->start_time : 0;
+                abs_start_seek = is->start_time + ((ifile->start_time != AV_NOPTS_VALUE) ? ifile->start_time : 0);
                 ifile->ts_offset = abs_start_seek > new_start_time ? -abs_start_seek : -new_start_time;
             } else if (copy_ts)
                 ifile->ts_offset = 0;
